import requests

# Google Maps API key
API_KEY = 'https://{baseURL}/routemonitoring/{version}/routes?key={Your_API_Key}'

def get_traffic_data(start, end):
    # Build the URL for the Directions API
    url = f'https://maps.googleapis.com/maps/api/directions/json?origin={start}&destination={end}&key={API_KEY}&departure_time=now'
    
    # Send the request to the API
    response = requests.get(url)
    
    if response.status_code == 200:
        data = response.json()
        return data
    else:
        print('Error fetching data from the API')
        return None

def process_traffic_data(data):
    if data and 'routes' in data and len(data['routes']) > 0:
        route = data['routes'][0]
        legs = route['legs'][0]
        
        traffic_info = {
            'start_address': legs['start_address'],
            'end_address': legs['end_address'],
            'distance': legs['distance']['text'],
            'duration': legs['duration']['text'],
            'duration_in_traffic': legs.get('duration_in_traffic', {}).get('text', 'N/A'),
            'steps': []
        }
        
        for step in legs['steps']:
            traffic_info['steps'].append({
                'distance': step['distance']['text'],
                'duration': step['duration']['text'],
                'instructions': step['html_instructions'],
                'traffic_speed': step.get('traffic_speed_entry', [{}])[0].get('speed_category', 'N/A')
            })
        
        return traffic_info
    else:
        print('No route found')
        return None

def display_traffic_info(traffic_info):
    if traffic_info:
        print(f"Route from {traffic_info['start_address']} to {traffic_info['end_address']}:")
        print(f"Distance: {traffic_info['distance']}")
        print(f"Estimated travel time: {traffic_info['duration']}")
        print(f"Travel time in traffic: {traffic_info['duration_in_traffic']}")
        print("\nSteps:")
        
        for step in traffic_info['steps']:
            print(f" - {step['instructions']}")
            print(f"   Distance: {step['distance']}, Duration: {step['duration']}, Traffic Speed: {step['traffic_speed']}")
    else:
        print('No traffic information available')

def main():
    start = input('Enter the starting point: ')
    end = input('Enter the destination: ')
    
    traffic_data = get_traffic_data(start, end)
    traffic_info = process_traffic_data(traffic_data)
    display_traffic_info(traffic_info)

if __name__ == '__main__':
    main()
